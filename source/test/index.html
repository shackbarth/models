<!doctype html>
<html>
  <head>
    <title>xTuple Enyo Unit Test Suite</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta charset="UTF-8">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">

    <script type="text/javascript">
      window.DEVELOPMENT_MODE = false;
    </script>

    <script src="../enyo/enyo.js" type="text/javascript"></script>
    <script src="../package.js" type="text/javascript"></script>
    <script src="../enyo/tools/test/core/test.js" type="text/javascript"></script>
    <link href="../enyo/tools/test/core/test.css" rel="stylesheet" type="text/css" />
    <!--
      This test runner will run all of the test suites mentioned in the tests/package.js depends file
    -->
    <script src="tests/package.js" type="text/javascript"></script>
  </head>

  <body>
  <script type="text/javascript">

    var needDB = false;

    if(needDB) {
       XT.dataSource.connect(function () {
         XT.session.acquireSession({
           username: "admin",
           password: "admin",
           organization: "production"
         }, function (result) {
           if (result.code === 1) {
             // force new session, always
             XT.session.selectSession("FORCE_NEW_SESSION", function () {
               var app = new enyo.TestRunner();
               app.renderInto(document.body);

             });
           } else if (result.code === 4) {
             // we're ok? not sure how but, whatever...
             var app = new enyo.TestRunner();
             app.renderInto(document.body);
           } else {
             throw new Error("could not acquire valid session");
           }
         });
       });

    } else {
      // don't need a DB.
      new enyo.TestRunner().write();
    }
  </script>
  </body>
</html>
